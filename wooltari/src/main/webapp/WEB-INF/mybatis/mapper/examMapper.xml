<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="exam">
	
	<!-- 응시할 시험리스트 목록 추가 -->
	<insert id="insertExamwishList" parameterType="com.wooltari.exam.Exam">
		INSERT INTO examwishList(num, examwishDate, userId, examinfoName, dday) values
			(el_cnum.NEXTVAL, #{examwishDate}, #{userId}, #{examinfoName}, #{dday})
	</insert>

	<!-- 총 데이터 수   [[[일단 보류]]]-->
<!-- 	<select id="wishdataCount" resultType="Integer" parameterType="map">
		SELECT NVL(COUNT(*),0) FROM examwishList el JOIN member m ON el.userId = m.userId
		<where>
			<if test="searchValue!=null and searchValue!=''">
				<include refid=""></include>
			</if>
		</where>
	</select>	 -->
	
	<!-- 응시할 시험리스트 목록 (번호, 시험명, 주최기관, 응시일, 디데이 필요) -->
	<select id="examwishList" parameterType="map" resultType="com.wooltari.exam.Exam">
		SELECT * FROM (
			SELECT ROWNUM rnum, tb.* FROM (
				SELECT num, el.examinfoName, examinfoOrgan, examwishDate, dday FROM examwishList el
				  JOIN examinfo e ON el.examinfoName = e.examinfoName WHERE userId = 't1'
		<![CDATA[		  
	  			) tb WHERE ROWNUM <= #{end}
	    	) WHERE rnum >= #{start}
		]]>
	</select>
	
</mapper>